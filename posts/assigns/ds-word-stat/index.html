<!doctype html><html><head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge"><title>File word retrieval and statistics using Python - lunarwhite</title><link rel=icon type=image/png href=favicon/favicon.ico><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="summary for in-class assignments in SDU.">
<meta property="og:image" content>
<meta property="og:title" content="File word retrieval and statistics using Python">
<meta property="og:description" content="summary for in-class assignments in SDU.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://lunarwhite.github.io/posts/assigns/ds-word-stat/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2020-12-19T19:48:51+00:00">
<meta property="article:modified_time" content="2020-12-19T19:48:51+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="File word retrieval and statistics using Python">
<meta name=twitter:description content="summary for in-class assignments in SDU.">
<script src=https://lunarwhite.github.iojs/feather.min.js></script>
<link href=https://lunarwhite.github.io/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet>
<link rel=stylesheet type=text/css media=screen href=https://lunarwhite.github.io/css/main.2cd813e50a99e0d45695e178eb612f3c1b609d0213e57cffe91396333316436e.css>
</head>
<body>
<div class=content><header>
<div class=main>
<a href=https://lunarwhite.github.io>lunarwhite</a>
</div>
<nav>
<a href=/>Home</a>
<a href=/posts>Posts</a>
<a href=/tags>Tags</a>
<a href=/about>About</a>
</nav>
</header>
<main>
<article>
<div class=title>
<h1 class=title>File word retrieval and statistics using Python</h1>
<div class=meta>Posted on Dec 19, 2020</div>
</div>
<section class=body>
<h2 id=1-要求>1 要求</h2>
<h3 id=11-简介>1.1 简介</h3>
<p>给定一个文本文件，要求统计给定单词在文本中<strong>出现的总次数</strong>，并检索输出某个单词出现在文本中的<strong>行号</strong>、在<strong>该行中出现的次数</strong>以及<strong>位置</strong>。</p>
<h3 id=12思路>1.2思路</h3>
<p>可以分为主控菜单程序和另外三个部分实现：</p>
<ul>
<li>零、主控菜单程序
<ul>
<li>(1) 头文件包含</li>
<li>(2) 菜单选项包括
<ul>
<li>建立文件</li>
<li>单词计数</li>
<li>单词定位</li>
<li>退出程序</li>
</ul>
</li>
<li>(3) 选择1-4执行相应的操作，其他字符为非法</li>
</ul>
</li>
<li>一、建立一个文本文件，文件名由用户用键盘输入
<ul>
<li>实现过程
<ul>
<li>(1) 定义一个串变量</li>
<li>(2) 定义文本文件</li>
<li>(3) 输入文件名，打开该文件</li>
<li>(4) 循环读入文本行，写入文本文件</li>
<li>(5) 关闭文件</li>
</ul>
</li>
</ul>
</li>
<li>二、给定单词计数，输入一个不含空格的单词，统计输出该单词在文本中的出现次数
<ul>
<li>实现设计
<ul>
<li>要用到模式匹配算法，逐行扫描文本文件。匹配一个，计数器加1，直到整个文件扫描结束；然后输出单词出现的次数</li>
<li>朴素模式匹配算法的基本思路是将给定字串与主串从第一个字符开始比较，找到首次与子串完全匹配的子串为止，并记住该位置。</li>
<li>但为了实现统计子串出现的个数，不仅需要从主串的第一个字符位置开始比较，而且需要从主串的任一位置检索匹配字符串。</li>
</ul>
</li>
<li>实现过程
<ul>
<li>(1) 输入要检索的文本文件名，打开相应的文件</li>
<li>(2) 输入要检索统计的单词</li>
<li>(3) 循环读文本文件，读入一行，将其送入定义好的串中，并求该串的实际长度，调用串匹配函数进行计数</li>
<li>(4) 关闭文件，输出统计结果</li>
</ul>
</li>
</ul>
</li>
<li>三、检索给定单词，输入一个单词，检索并输出该单词所在的行号、该行中出现的次数以及在该行中的相应位置。
<ul>
<li>实现设计
<ul>
<li>同上一个设计类似，但是要相对复杂一些</li>
</ul>
</li>
<li>实现过程
<ul>
<li>(1) 输入要检索的文本文件名，打开相应的文件</li>
<li>(2) 输入要检索统计的单词</li>
<li>(3) 循环读文本文件，读入一行，将其送入定义好的串中，并求该串的实际长度。行计数器置初值0，调用串匹配函数进行计数。如果 行单词计数器!=0 输出行号、该行有匹配单词的个数以及相应的位置</li>
<li>(4) 关闭文件，输出统计结果</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id=2-实现>2 实现</h2>
<div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#007020;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>sys</span>
<span style=color:#007020;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>re</span>
<span style=color:#007020;font-weight:700>from</span> <span style=color:#0e84b5;font-weight:700>string</span> <span style=color:#007020;font-weight:700>import</span> punctuation

<span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>create_file</span>(name, msg):
    partial_path <span style=color:#666>=</span> <span style=color:#4070a0>&#34;D:</span><span style=color:#4070a0;font-weight:700>\\</span><span style=color:#4070a0>MEDESKTOP</span><span style=color:#4070a0;font-weight:700>\\</span><span style=color:#4070a0>&#34;</span>
    full_path <span style=color:#666>=</span> partial_path <span style=color:#666>+</span> name <span style=color:#666>+</span> <span style=color:#4070a0>&#39;.txt&#39;</span>
    <span style=color:#007020;font-weight:700>global</span> full_name
    full_name <span style=color:#666>=</span> full_path
    file <span style=color:#666>=</span> <span style=color:#007020>open</span>(full_path, <span style=color:#4070a0>&#39;w&#39;</span>)
    file<span style=color:#666>.</span>write(msg)
    <span style=color:#007020>print</span>(<span style=color:#4070a0>&#34;File created successfully</span><span style=color:#4070a0;font-weight:700>\n</span><span style=color:#4070a0>&#34;</span>)
    <span style=color:#007020>print</span>(full_name)

<span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>run_query</span>(wanted):
    word_total <span style=color:#666>=</span> <span style=color:#40a070>0</span>
    <span style=color:#007020;font-weight:700>for</span> each <span style=color:#007020;font-weight:700>in</span> one_word_list:
        <span style=color:#007020;font-weight:700>if</span> each <span style=color:#666>==</span> wanted:
            word_total <span style=color:#666>+=</span> <span style=color:#40a070>1</span>

    <span style=color:#007020>print</span>(<span style=color:#4070a0>&#39;&#34;</span><span style=color:#70a0d0;font-style:italic>{}</span><span style=color:#4070a0>&#34; occurs </span><span style=color:#70a0d0;font-style:italic>{}</span><span style=color:#4070a0> times&#39;</span><span style=color:#666>.</span>format(wanted, word_total))

    line_number <span style=color:#666>=</span> <span style=color:#40a070>0</span>
    <span style=color:#007020;font-weight:700>for</span> line <span style=color:#007020;font-weight:700>in</span> text_list:
        line_plain <span style=color:#666>=</span> re<span style=color:#666>.</span>sub(<span style=color:#4070a0>r</span><span style=color:#4070a0>&#39;[</span><span style=color:#70a0d0;font-style:italic>{}</span><span style=color:#4070a0>]&#39;</span><span style=color:#666>.</span>format(punctuation), <span style=color:#4070a0>&#39;&#39;</span>, line)
        word_list <span style=color:#666>=</span> [word<span style=color:#666>.</span>lower() <span style=color:#007020;font-weight:700>for</span> word <span style=color:#007020;font-weight:700>in</span> line_plain<span style=color:#666>.</span>split()]
        line_number <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
        <span style=color:#007020;font-weight:700>if</span> wanted <span style=color:#007020;font-weight:700>in</span> word_list:
            <span style=color:#007020>print</span>(<span style=color:#4070a0>&#39;</span><span style=color:#4070a0;font-weight:700>\t</span><span style=color:#4070a0>line </span><span style=color:#70a0d0;font-style:italic>{}</span><span style=color:#4070a0>: </span><span style=color:#70a0d0;font-style:italic>{}</span><span style=color:#4070a0>&#39;</span><span style=color:#666>.</span>format(line_number, text_list[line_number <span style=color:#666>-</span> <span style=color:#40a070>1</span>]), end<span style=color:#666>=</span><span style=color:#4070a0>&#39;&#39;</span>)

<span style=color:#007020;font-weight:700>if</span> __name__ <span style=color:#666>==</span> <span style=color:#4070a0>&#39;__main__&#39;</span>:
    <span style=color:#007020;font-weight:700>while</span> <span style=color:#007020;font-weight:700>True</span>:
        <span style=color:#007020>print</span>(<span style=color:#4070a0>&#34;1.create file</span><span style=color:#4070a0;font-weight:700>\n</span><span style=color:#4070a0>2.count and locate</span><span style=color:#4070a0;font-weight:700>\n</span><span style=color:#4070a0>3.quit</span><span style=color:#4070a0;font-weight:700>\n</span><span style=color:#4070a0>&#34;</span>)
        choice <span style=color:#666>=</span> <span style=color:#007020>input</span>(<span style=color:#4070a0>&#34;Please enter the choice number:</span><span style=color:#4070a0;font-weight:700>\n</span><span style=color:#4070a0>&#34;</span>)

        <span style=color:#007020;font-weight:700>if</span> choice <span style=color:#666>==</span> <span style=color:#4070a0>&#34;1&#34;</span>:
            name <span style=color:#666>=</span> <span style=color:#007020>input</span>(<span style=color:#4070a0>&#34;Please enter the name of file:</span><span style=color:#4070a0;font-weight:700>\n</span><span style=color:#4070a0>&#34;</span>)
            msg <span style=color:#666>=</span> <span style=color:#007020>input</span>(<span style=color:#4070a0>&#34;Please enter the contents:</span><span style=color:#4070a0;font-weight:700>\n</span><span style=color:#4070a0>&#34;</span>)
            create_file(name, msg)

        <span style=color:#007020;font-weight:700>elif</span> choice <span style=color:#666>==</span> <span style=color:#4070a0>&#34;2&#34;</span>:
            wanted <span style=color:#666>=</span> <span style=color:#007020>input</span>(<span style=color:#4070a0>&#34;Please enter the word:</span><span style=color:#4070a0;font-weight:700>\n</span><span style=color:#4070a0>&#34;</span>)
            text <span style=color:#666>=</span> <span style=color:#007020>open</span>(full_name, <span style=color:#4070a0>&#39;r&#39;</span>)
            text_list <span style=color:#666>=</span> text<span style=color:#666>.</span>readlines()
            text_plain <span style=color:#666>=</span> re<span style=color:#666>.</span>sub(<span style=color:#4070a0>r</span><span style=color:#4070a0>&#39;[</span><span style=color:#70a0d0;font-style:italic>{}</span><span style=color:#4070a0>]&#39;</span><span style=color:#666>.</span>format(punctuation), <span style=color:#4070a0>&#39;&#39;</span>, <span style=color:#4070a0>&#39;&#39;</span><span style=color:#666>.</span>join(text_list))
            one_word_list <span style=color:#666>=</span> [word<span style=color:#666>.</span>lower() <span style=color:#007020;font-weight:700>for</span> word <span style=color:#007020;font-weight:700>in</span> text_plain<span style=color:#666>.</span>split()]
            <span style=color:#007020>print</span>(one_word_list)
            run_query(wanted)
            <span style=color:#007020>print</span>(<span style=color:#4070a0>&#34;</span><span style=color:#4070a0;font-weight:700>\n</span><span style=color:#4070a0>&#34;</span>)

        <span style=color:#007020;font-weight:700>else</span>:
            <span style=color:#007020>print</span>(<span style=color:#4070a0>&#34;Thanks for using!</span><span style=color:#4070a0;font-weight:700>\n</span><span style=color:#4070a0>Bye~&#34;</span>)
            sys<span style=color:#666>.</span>exit(<span style=color:#40a070>0</span>)
</code></pre></div><h2 id=3-后续>3 后续</h2>
<h3 id=31-文件形式>3.1 文件形式</h3>
<ul>
<li>本文以 txt 文本文件为例</li>
<li>还可以采用网页 html / jsp 形式——>升级为网页检索工具</li>
<li>还可以将单文本索引升级为多文本（多网页）——>升级为搜索引擎。</li>
</ul>
<h3 id=32-扩展联想>3.2 扩展联想</h3>
<ul>
<li>爬虫</li>
<li>搜索引擎原理</li>
<li>多节点搜索的调度算法</li>
<li>NLP</li>
</ul>
</section>
<div class=post-tags>
<nav class="nav tags">
<ul class=tags>
<li><a href=/tags/assginment>assginment</a></li>
<li><a href=/tags/data-structure>data-structure</a></li>
</ul>
</nav>
</div>
</article>
</main>
<footer>
<hr><a class=soc href=https://www.linkedin.com/in/yuedongwoo/ title=LinkedIn><i data-feather=linkedin></i></a>|<a class=soc href=https://github.com/lunarwhite title=GitHub><i data-feather=github></i></a>|<a class=soc href title=Twitter><i data-feather=twitter></i></a>|<a class=soc href title=Instagram><i data-feather=instagram></i></a>|<a class=soc href title=Bilibili><i data-feather=tv></i></a>|<a class=soc href=https://www.zhihu.com/people/wydnlz title=Zhihu><i data-feather=link></i></a>|⚡️
2021 © lunarwhite | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a>
</footer>
<script>feather.replace()</script>
<script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$']],processEscapes:!0,processEnvironments:!0,skipTags:['script','noscript','style','textarea','pre'],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}}}),MathJax.Hub.Queue(function(){var b=MathJax.Hub.getAllJax(),a;for(a=0;a<b.length;a+=1)b[a].SourceElement().parentNode.className+=' has-jax'}),MathJax.Hub.Config({TeX:{equationNumbers:{autoNumber:"AMS"}}})</script></div>
</body>
</html>